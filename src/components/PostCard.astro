---
import { formatDateShort } from '../utils/formatDate';
import { calculateReadingTime } from '../utils/readingTime';

interface Props {
  title: string;
  description: string;
  date: Date;
  slug: string;
  tags: string[];
  category: string;
  image?: string;
  content: string;
}

const { title, description, date, slug, tags, category, image, content } = Astro.props;
const readingTime = calculateReadingTime(content);
---

<a href={`/blog/${slug}`} class="post-card">
  {image && (
    <img
      src={image}
      alt={title}
      class="post-card__image"
      loading="lazy"
    />
  )}
  
  <div class="post-card__meta">
    <time datetime={date.toISOString()}>{formatDateShort(date)}</time>
    <span>•</span>
    <span>{readingTime}</span>
    <span>•</span>
    <span>{category}</span>
  </div>
  
  <h3 class="post-card__title">{title}</h3>
  
  <p class="post-card__description">{description}</p>
  
  <div class="post-card__tags">
    {tags.slice(0, 3).map(tag => (
      <span class="tag">{tag}</span>
    ))}
  </div>
</a>
